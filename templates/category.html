{% extends "main.html" %}
{% block content %}
{% include "header.html" %}
<div class="row">
    <div class="col-md-4">
        {% include "categorylist.html" %}
    </div>
    <div class="col-md-8">
        <div class="row">
            <div class="col-xs-12">
                <h1>
                    {{category.name}} ({{items|length}} 
                    {% if items|length == 1 %}item{% else %}items{% endif %})
                </h1>
                {% if session.get('is_admin') == True %}
                <a href="{{url_for('editCategory', category_id = category.id)}}">Edit</a>
                <a href="{{url_for('deleteCategory', category_id = category.id)}}">Delete</a>
                {% endif %}
            </div>
        </div>
        {% if session.get('user_id') is not none %}
        <div class="row">
            <div class="col-xs-12">
                <a href="{{url_for('newItem', category_id = category.id)}}">Add</a>
            </div>
        </div>
        {% endif %}
        {% for item in items %}
            <div class="row">
                <div class="col-xs-12">
                    {{item.name}}
                    {% if item.description is not none %}<br />
                    {{item.description}}
                    {% endif %}
                    {% if (session.get('user_id') is not none
                        and session.get('user_id') == item.user_id) 
                        or session.get('is_admin') == True %}
                    <a href="{{url_for('editItem', item_id = item.id)}}">Edit</a>
                    <a href="{{url_for('deleteItem', item_id = item.id)}}">Delete</a>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}